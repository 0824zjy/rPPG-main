# 多领域移动视频生理数据集（MMPD）[2023年IEEE医学与生物工程学会国际年会（EMBC）口头报告]

## 📖 摘要
**这是由清华大学收集的[多领域移动视频生理数据集（MMPD）](<https://doi.org/10.48550/arXiv.2302.03840>)。**  
多领域移动视频生理数据集（MMPD）包含了33名受试者通过手机录制的11小时（**115.2万帧**）的视频记录。该数据集旨在采集在不同**肤色、身体动作和光照条件**下更具代表性的视频。MMPD数据集内容全面，带有八个描述性标签，并且可以与[rPPG-toolbox](https://github.com/ubicomplab/rPPG-Toolbox)和[PhysBench](https://github.com/KegangWangCCNU/PhysBench)结合使用。  
```
@INPROCEEDINGS{10340857,
  作者={唐建凯，陈克权，王云涛，史元春，施韦塔克·帕特尔，丹尼尔·麦克达夫，刘鑫},
  会议名称={2023年第45届IEEE医学与生物工程学会国际年会（EMBC）}, 
  标题={MMPD：多领域移动视频生理数据集}, 
  年份={2023},
  卷={},
  期={},
  页码={1-5},
  DOI={10.1109/EMBC40787.2023.10340857}}
```
## 🔥 更新内容
**[2024年9月]** **开源基准测试现已开放。请提交包含您的结果和代码的拉取请求（PR）。**  
**[2024年8月]** **联系邮箱已更新。申请请联系```tjk24@mails.tsinghua.edu.cn```。**  
**[2024年1月]** **引用的BibTex格式和数据发布协议已更新。**  
**[2023年11月]** **在两名参与者同意的情况下，其部分数据子集可用于教育目的。大学教师可以通过电子邮件申请访问该子集。**  
**[2023年6月]** **size.csv文件已更新，用户可以检查数据完整性。**  
**[2023年4月]** **在`rPPG-Toolbox_MMPD`文件夹中更新了代码，用户可以选择多个标签的任意组合。**  
对于已经下载或准备下载我们数据集的用户：建议您给这个代码仓库加星标，以防数据集在无通知的情况下更新。



## 🔍 示例
|                           |低亮度LED灯|高亮度LED灯|白炽灯|自然光|
|:-------------------------:|:-----:|:------:|:----------:|:----:|
|肤色类型3<br />静止状态|![](gif/LED-low_S.gif)|![](gif/LED-high_S.gif)|![](gif/Incandescent_S.gif)|![](gif/Nature_S.gif)|
|肤色类型4<br />旋转状态  |![](gif/LED-low_R.gif)|![](gif/LED-high_R.gif)|![](gif/Incandescent_R.gif)|![](gif/Nature_R.gif)|
|肤色类型5<br />说话状态   |![](gif/LED-low_T.gif)|![](gif/LED-high_T.gif)|![](gif/Incandescent_T.gif)|![](gif/Nature_T.gif)|
|肤色类型6<br />行走状态   |![](gif/LED-low_W.gif)|![](gif/LED-high_W.gif)|![](gif/Incandescent_W.gif)|![](gif/Nature_W.gif)|

## 🗝️ 访问与使用
**本数据集仅用于学术用途，禁止任何商业使用。**  
为方便起见，提供两种数据集：完整数据集（370GB，分辨率320×240），迷你数据集（48GB，分辨率80×60）。  
有两种下载方式：对于不同地区的研究人员，可通过OneDrive和百度网盘下载。对于中国的研究人员，也可以选择使用硬盘获取数据。
若要访问该数据集，您需要下载这份[数据发布协议](https://github.com/McJackTang/MMPD_rPPG_dataset/blob/main/MMPD_Release_Agreement.pdf)。  
请扫描填写完整的协议，并通过您所在机构的电子邮件发送至<tjk24@mails.tsinghua.edu.cn>，并抄送<yuntaowang@tsinghua.edu.cn>。电子邮件的主题应为“MMPD访问请求 - 您的机构名称”。在邮件中，请概述您所在机构的网站以及相关出版物，说明申请访问MMPD数据集的理由，包括其在您具体研究项目中的预期应用。邮件应由教师而非学生发送。  


## ⚙️ 实验流程[已更新]  
<img src='https://github.com/McJackTang/Markdown_images/blob/main/procedure.png' width = 50% height = 50% />

## 📊 数据分布
<!DOCTYPE html>
<html lang="en">
<body>

<table border="6" width="500px" bgcolor="#f2f2f2" cellspacing="0" cellpadding="5" align="center">
    <thead>
        <tr bgcolor="#2e8b57">
            <th rowspan="2">分布情况</th>
            <th colspan="4">肤色</th>
            <th colspan="2">性别</th>
            <th colspan="2">是否戴眼镜</th>
            <th colspan="2">是否有头发遮挡</th>
            <th colspan="2">是否化妆</th>
        </tr>
        <tr bgcolor="#2e8b57">
            <th>类型3</th>
            <th>类型4</th>
            <th>类型5</th>
            <th>类型6</th>
            <th>男性</th>
            <th>女性</th>
            <th>是</th>
            <th>否</th>
            <th>是</th>
            <th>否</th>
            <th>是</th>
            <th>否</th>
        </tr>
    </thead>
    <tbody align="center" valign="middle">
        <tr>
        <td>数量</td>
        <td>16</td>
        <td>5</td>
        <td>6</td>
        <td>6</td>
        <td>16</td>
        <td>17</td>
        <td>10</td>
        <td>23</td>
        <td>8</td>
        <td>23</td>
        <td>4</td>
        <td>29</td>
    </tr>
</table>
</body>
</html>


## 🖥️ 数据集结构
```
MMPD_Dataset
├── 受试者1
    ├── p1_0.mat        # px_y.mat：x表示受试者的序号，y表示实验的序号，与实验流程相对应。
        ├── video       # 受试者的渲染图像，分辨率为320×240     [帧数t, 宽度w, 高度h, 通道数c]
        ├── GT_ppg      # 光电容积脉搏波（PPG）波形信号                                         [帧数t]
        ├── light       # '低亮度LED灯','高亮度LED灯','白炽灯','自然光' 
        ├── motion      # '静止状态','旋转状态','说话状态','行走状态'
        ├── exercise    # 是，否
        ├── skin_color  # 3,4,5,6
        ├── gender      # '男性','女性'
        ├── glasser     # 是，否
        ├── hair_cover  # 是，否
        ├── makeup      # 是，否
    ├── ... .mat
    ├── p1_19.mat
├── ...
├── 受试者33
├── size.csv # 每一行代表一个mat文件及其字节大小
```
 
读取数据示例：
 
```
import scipy.io as sio
f = sio.loadmat('p1_0.mat')
print(f.keys())
```
## 开源模型的基准测试
我们注意到，有大量新的论文将MMPD用作测试数据集。我们鼓励社区开源相关方法的代码，并在下方提交拉取请求。我们会持续更新这些内容，其他研究人员可以将这些指标作为基准测试结果。如果您仅使用了MMPD数据集的一部分，您应该注明相关细节。
| 年份 | 方法      | 训练数据集 | 平均绝对误差（MAE）  | 均方根误差（RMSE）  | 平均绝对百分比误差（MAPE）  | 皮尔逊相关系数（PEARSON） | 论文链接  | 代码链接 | 可重复性| 备注|
|-------|--------------|--------------|------|-------|-------|---------|-------|---------|---------|---------|
|2023|生理网络（PhysNet）|UBFC数据集| 10.24 | 16.54|12.46 | 0.29  |[论文](https://doi.org/10.48550/arXiv.2302.03840)|[代码](https://github.com/McJackTang/MMPD_rPPG_dataset/)|星标数超100|官方|
## 📝 原论文中的结果（在MMPD数据集上测试）
### 最简单场景
在最简单的场景中，我们仅将静止状态、肤色类型3以及人工光照条件作为基准。
| 方法      | 平均绝对误差（MAE）  | 均方根误差（RMSE）  | 平均绝对百分比误差（MAPE）  | 皮尔逊相关系数（PEARSON） |
|--------------|------|-------|-------|---------|
| 独立成分分析（ICA）          | 8.75 | 12.35 | 12.26 | 0.21    |
| 基于光流的方法（POS）          | 7.69 | 11.95 | 11.45 | 0.19    |
| 基于色度的方法（CHROME）       | 8.81 | 13.18 | 12.95 | -0.03   |
| 基于绿色通道的方法（GREEN）        | 10.57| 15.03 | 14.59 | 0.23    |
| 局部梯度积分法（LGI）          | 7.46 | 11.92 | 10.12 | 0.12    |
| 光电容积脉搏波提取法（PBV）          | 8.15 | 11.52 | 11.04 | 0.35    |
| 时间序列卷积注意力网络（TS-CAN，在PURE数据集上训练） | 1.78 |3.57 | 2.47 |0.93  |
| 时间序列卷积注意力网络（TS-CAN，在UBFC数据集上训练） | **1.46** | **3.13**  | **2.04**  | **0.94**   |

### 无监督信号处理方法（子集）

我们在数据集中评估了六种传统的无监督方法。在肤色比较实验中，我们排除了运动状态、自然光条件和行走状态，以消除任何混杂因素，专注于该任务。同样，在动作比较实验中，排除了运动状态和自然光条件；在光照比较实验中，排除了运动状态和行走状态。这种方法使我们能够排除混杂因素，更好地理解每个任务所带来的独特挑战。

<img src='https://github.com/McJackTang/Markdown_images/blob/main/unsupervised.jpg' width = 70% height = 70%/>

### 有监督深度学习方法（子集）
在本文中，我们研究了最先进的有监督神经网络在MMPD数据集上的表现，并研究了肤色、动作和光照的影响。我们采用了与评估无监督方法相同的排除标准。

<img src='https://github.com/McJackTang/Markdown_images/blob/main/supervised.jpg' width = 70% height = 70% />

### 完整数据集结果
对于完整数据集，目前没有现有的方法能够准确预测光电容积脉搏波（PPG）和心率。我们期待能有适用于日常场景的算法出现。鼓励研究人员报告他们的结果并与我们交流。

  | 方法      | 平均绝对误差（MAE）   | 均方根误差（RMSE）  | 平均绝对百分比误差（MAPE）  | 皮尔逊相关系数（PEARSON） |
|--------------|-------|-------|-------|---------|
| 独立成分分析（ICA）          | 18.57 | 24.28 | 20.85 | 0.00    |
| 基于光流的方法（POS）          | 12.34 | 17.70 | 14.43 | 0.17    |
| 基于色度的方法（CHROME）       | 13.63 | 18.75 | 15.96 | 0.08    |
| 基于绿色通道的方法（GREEN）        | 21.73 | 27.72 | 24.44 | -0.02   |
| 局部梯度积分法（LGI）          | 17.02 | 23.28 | 18.92 | 0.04    |
| 光电容积脉搏波提取法（PBV）          | 17.88 | 23.53 | 20.11 | 0.09    |

| 方法（在PURE数据集上训练） | 平均绝对误差（MAE）   | 均方根误差（RMSE）  | 平均绝对百分比误差（MAPE）  | 皮尔逊相关系数（PEARSON） |
|--------------------------|-------|-------|-------|---------|
| 时间序列卷积注意力网络（TS-CAN）                   | 13.94 | 21.61 | 15.14 | 0.20    |
| 深度生理网络（DeepPhys）                 | 16.92 | 24.61 | 18.54 | 0.05    |
| 高效生理网络（EfficientPhys）            | 14.03 | 21.62 | 15.32 | 0.17    |
| 生理网络（PhysNet）                  | 13.22 | 19.61 | 14.73 | 0.23    |

| 方法（在UBFC数据集上训练） | 平均绝对误差（MAE）   | 均方根误差（RMSE）  | 平均绝对百分比误差（MAPE）  | 皮尔逊相关系数（PEARSON） |
|--------------------------|-------|-------|-------|---------|
| 时间序列卷积注意力网络（TS-CAN）                   | 14.01 | 21.04 | 15.48 | 0.24    |      
| 深度生理网络（DeepPhys）                 | 17.50 | 25.00 | 19.27 | 0.05    |
| 高效生理网络（EfficientPhys）            | 13.78 | 22.25 | 15.15 | 0.09    |
| 生理网络（PhysNet）                  | **10.24** | **16.54** | **12.46** | **0.29**    |

| 方法（在SCAMPS数据集上训练） | 平均绝对误差（MAE）   | 均方根误差（RMSE）  | 平均绝对百分比误差（MAPE）  | 皮尔逊相关系数（PEARSON） |
|----------------------------|-------|-------|-------|---------|
| 时间序列卷积注意力网络（TS-CAN）                     | 19.05 | 24.20 | 21.77 | 0.14    |      
| 深度生理网络（DeepPhys）                   | 15.22 | 23.17 | 16.56 | 0.09    |
| 高效生理网络（EfficientPhys）              | 20.37 | 25.04 | 23.48 | 0.11    |
| 生理网络（PhysNet）                    | 21.03 | 25.35 | 24.68 | 0.14    |

## 📄 引用
标题: [MMPD：多领域移动视频生理数据集](https://doi.org/10.48550/arXiv.2302.03840)  
唐建凯，陈克权，王云涛，史元春，施韦塔克·帕特尔，丹尼尔·麦克达夫，刘鑫，“MMPD：多领域移动视频生理数据集”，《IEEE医学与生物工程学会国际年会论文集》，2023年  
```
@INPROCEEDINGS{10340857,
  作者={唐建凯，陈克权，王云涛，史元春，施韦塔克·帕特尔#   r P P G  
 #   r P P G  
 